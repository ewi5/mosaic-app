/* ========== Root theme ========= */
:root{
  --bg:#0e1114;
  --panel:#1c2228;
  --panel-2:#1a2026;
  --ink:#e7ebf0;
  --muted:#9aa7b2;
  --sky-w: 30vw;        /* left column width — will be tweaked by media queries */
  --sky-pad: 22px;
  --gap: 16px;
  --card-w: 320px;      /* fixed card width so we ALWAYS render 3 columns */
  --shadow: 0 10px 28px rgba(0,0,0,.35);
  --glass: 0 0 0 1px rgba(255,255,255,.06), 0 22px 40px rgba(0,0,0,.5) inset;
}

/* Layout base */
html,body{
  background: var(--bg);
  color: var(--ink);
  height:100%;
  margin:0;
  overflow: hidden; /* stop body scrollbars; grid scrolls vertically itself */
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Apple Color Emoji","Segoe UI Emoji";
}

/* Left sky — FIXED (never scrolls) */
.sky{
  position: fixed;
  top: 0;
  left: 0;
  width: var(--sky-w);
  min-width: 240px;
  max-width: 420px;
  height: 100vh;
  padding: calc(var(--sky-pad) + env(safe-area-inset-top)) var(--sky-pad) var(--sky-pad) var(--sky-pad);
  background: radial-gradient(1000px 600px at -20% 50%, #0f141a 0, #0b0f13 60%, #0a0d11 100%);
  border-right: 1px solid rgba(255,255,255,.06);
  box-shadow: 4px 0 28px rgba(0,0,0,.45);
  z-index: 2;
}

.brand{
  font-size: clamp(28px, 5.2vw, 56px);
  margin: 0 0 10px 0;
  letter-spacing: .5px;
}

.skyline .line{
  display: block;
  color: var(--ink);
  margin: 6px 0;
  font-size: 18px;
}
.note{
  margin-top: 18px;
  color: var(--muted);
  font-size: 14px;
}

/* Joystick (opaque simple) */
.stick{
  position: fixed;
  left: calc(var(--sky-w) - 120px);
  bottom: 16vh; /* moved up ~5% compared to default */
  width: 110px;
  height: 110px;
  border-radius: 28px;
  background: #14181c;
  border: 1px solid rgba(255,255,255,.08);
  box-shadow: var(--shadow);
}
.stick:active{ transform: scale(.98); }

/* Building wrapper occupies the rest; vertical scroll ONLY here */
.building-wrap{
  position: absolute;
  left: var(--sky-w);
  top: 0;
  right: 0;
  bottom: 0;
  overflow-y: auto;
  overflow-x: hidden;
  padding: calc(var(--sky-pad) + env(safe-area-inset-top)) var(--sky-pad) calc(24px + env(safe-area-inset-bottom)) var(--sky-pad);
  scroll-behavior: smooth;
}

/* Fixed opaque building outline background (non-moving) */
.building-bg{
  position: fixed;
  left: var(--sky-w);
  top: 0;
  right: 0;
  bottom: 0;
  background:
    linear-gradient(transparent 62px, rgba(255,255,255,.04) 62px) top left / 100% 1px no-repeat,
    linear-gradient(90deg, rgba(255,255,255,.05) 0 1px, transparent 1px) left top / calc(var(--card-w) + var(--gap)) 100% repeat-x;
  opacity:.5;
  pointer-events: none;
}

/* Grid — ALWAYS 3 columns, fixed card width */
.building{
  position: relative;
  z-index: 1;
  display: grid;
  grid-template-columns: repeat(3, var(--card-w));
  gap: var(--gap);
  /* center grid area */
  width: calc(3 * var(--card-w) + 2 * var(--gap));
  margin: 0 auto;
}

/* Card = window */
.card{
  background: linear-gradient(180deg, var(--panel) 0%, var(--panel-2) 100%);
  border: 1px solid rgba(255,255,255,.06);
  border-radius: 24px;
  padding: 18px;
  box-shadow: var(--shadow);
}

.row{ display:flex; align-items:center; gap:12px; }

.avatar{
  width: 74px; height:74px; border-radius: 50%;
  display:grid; place-items:center;
  color: #fff; letter-spacing:.5px; font-weight:700; text-transform: lowercase;
  box-shadow: 0 0 0 1px rgba(255,255,255,.08) inset, 0 12px 24px rgba(0,0,0,.35);
}

.name{ font-size:24px; font-weight:800; letter-spacing:.5px; text-transform: lowercase; }
.days{ color: var(--muted); margin: 16px 0 12px; font-size: 18px; }

.actions{ display:flex; align-items:center; gap:12px; }
.pill{
  background:#0f1317;
  color:#e7ebf0;
  border:1px solid rgba(255,255,255,.08);
  border-radius: 16px;
  padding:10px 16px;
  font-weight:700;
}
.pol{
  width:48px; height:48px; border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, #ffd0ff, #b16cff 60%, #6a54ff 100%);
  border: 0;
  box-shadow: 0 6px 22px rgba(177,108,255,.45);
}

/* Apple-like deterministic colors for initials circles */
.avatar[data-hue]{ background: hsl(var(--h), 70%, 50%); }
.avatar[data-hue="0"]  { --h: 0; }
.avatar[data-hue="1"]  { --h: 25; }
.avatar[data-hue="2"]  { --h: 45; }
.avatar[data-hue="3"]  { --h: 140; }
.avatar[data-hue="4"]  { --h: 165; }
.avatar[data-hue="5"]  { --h: 190; }
.avatar[data-hue="6"]  { --h: 210; }
.avatar[data-hue="7"]  { --h: 230; }
.avatar[data-hue="8"]  { --h: 260; }
.avatar[data-hue="9"]  { --h: 300; }
.avatar[data-hue="10"] { --h: 330; }

/* Responsive: tighten sky a bit on small screens (still fixed) */
@media (max-width: 980px){
  :root{ --sky-w: 32vw; --card-w: 300px; }
  .stick{ left: calc(var(--sky-w) - 112px); bottom: 16vh; }
}
@media (max-width: 860px){
  :root{ --sky-w: 34vw; --card-w: 280px; }
}
